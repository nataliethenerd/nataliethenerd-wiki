<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Boy Color CPU Interactive Diagram</title>
    <style>
        :root {
            --bg-color: #ffffff;
            --text-color: #000000;
            --chip-color: #f0f0f0;
            --chip-border: #333333;
            --pin-color: #cccccc;
            --pin-border: #666666;
            --pin-hover: #ffff00;
            --pin-selected: #ff4444;
            --pin-text: #333333;
            --panel-bg: #f8f8f8;
            --panel-border: #ddd;
            --shadow: rgba(0,0,0,0.1);
        }

        [data-theme="dark"] {
            --bg-color: #1a1a1a;
            --text-color: #ffffff;
            --chip-color: #2a2a2a;
            --chip-border: #555555;
            --pin-color: #444444;
            --pin-border: #666666;
            --pin-hover: #ffff00;
            --pin-selected: #ff4444;
            --pin-text: #cccccc;
            --panel-bg: #252525;
            --panel-border: #444;
            --shadow: rgba(0,0,0,0.3);
        }

        body {
            margin: 0;
            padding: 20px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-color);
            color: var(--text-color);
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        h1 {
            color: var(--text-color);
            margin: 0;
            font-size: 1.8em;
        }

        .theme-toggle {
            background: var(--panel-bg);
            border: 2px solid var(--panel-border);
            color: var(--text-color);
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
            touch-action: manipulation;
        }

        .theme-toggle:hover {
            background: var(--pin-hover);
            color: #000;
        }
        
        .main-content {
            display: flex;
            gap: 20px;
            align-items: flex-start;
        }
        
        .cpu-container {
            flex: 1;
            background: var(--panel-bg);
            border: 1px solid var(--panel-border);
            border-radius: 8px;
            padding: 10px;
            box-shadow: 0 2px 10px var(--shadow);
            min-width: 0;
        }

        .cpu-svg {
            width: 100%;
            height: auto;
            display: block;
        }
        
        .info-panel {
            width: 350px;
            background: var(--panel-bg);
            border: 1px solid var(--panel-border);
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 10px var(--shadow);
            max-height: 80vh;
            overflow-y: auto;
            flex-shrink: 0;
        }
        
        .info-panel h3 {
            margin-top: 0;
            color: var(--text-color);
            border-bottom: 1px solid var(--panel-border);
            padding-bottom: 10px;
        }
        
        .pin-info {
            min-height: 120px;
        }
        
        .pin-details {
            margin-bottom: 15px;
            padding: 12px;
            background: var(--chip-color);
            border-radius: 6px;
            border-left: 4px solid var(--pin-selected);
        }
        
        .pin-number {
            font-size: 1.2em;
            font-weight: bold;
            color: var(--pin-selected);
            margin-bottom: 6px;
        }
        
        .pin-name {
            font-size: 1em;
            color: var(--text-color);
            margin-bottom: 6px;
            font-weight: 500;
        }
        
        .pin-description {
            color: var(--text-color);
            line-height: 1.4;
            opacity: 0.8;
            font-size: 0.9em;
        }

        .selected-pins {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid var(--panel-border);
        }

        .selected-pins h4 {
            margin-top: 0;
            color: var(--text-color);
            font-size: 1em;
        }

        .selected-pin-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 4px 8px;
            margin: 2px 0;
            background: var(--chip-color);
            border-radius: 4px;
            font-size: 0.9em;
        }

        .clear-selection {
            background: var(--pin-selected);
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9em;
            margin-top: 10px;
        }

        .clear-selection:hover {
            opacity: 0.8;
        }
        
        .cpu-chip {
            stroke: var(--chip-border);
            stroke-width: 2;
            fill: var(--chip-color);
            transition: all 0.3s ease;
        }
        
        .cpu-label {
            fill: var(--text-color);
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            font-size: 18px;
            text-anchor: middle;
            dominant-baseline: middle;
            transition: fill 0.3s ease;
        }
        
        .pin {
            fill: var(--pin-color);
            stroke: var(--pin-border);
            stroke-width: 1;
            cursor: pointer;
            transition: all 0.2s ease;
            touch-action: manipulation;
        }
        
        .pin:hover {
            fill: var(--pin-hover);
            stroke: var(--pin-yellow);
            stroke-width: 2;
        }
        
        .pin.selected {
            fill: var(--pin-selected);
            stroke: var(--pin-selected);
            stroke-width: 2;
            filter: drop-shadow(0 0 3px var(--pin-selected));
        }
        
        .pin-number-label {
            fill: var(--pin-text);
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            font-size: 12px;
            text-anchor: middle;
            dominant-baseline: middle;
            pointer-events: none;
            transition: fill 0.3s ease;
        }
        
        .stats {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid var(--panel-border);
            font-size: 0.9em;
            color: var(--text-color);
            opacity: 0.8;
        }
        
        @media (max-width: 1200px) {
            .main-content {
                flex-direction: column;
            }
            
            .info-panel {
                width: 100%;
                max-height: none;
            }
        }

        @media (max-width: 768px) {
            body {
                padding: 0;
            }

            .container {
                padding: 0;
            }

            .header {
                flex-direction: column;
                text-align: center;
                gap: 15px;
                padding: 10px;
            }
            
            h1 {
                font-size: 1.5em;
            }

            .main-content {
                flex-direction: column;
                gap: 0;
            }
            
            .cpu-container {
                padding: 5px;
                border-radius: 0;
                border-left: none;
                border-right: none;
                width: 100vw;
                margin-left: calc(-50vw + 50%);
            }
            
            .info-panel {
                width: 100%;
                max-height: none;
                padding: 15px;
                border-radius: 0;
                border-left: none;
                border-right: none;
                border-top: none;
                width: 100vw;
                margin-left: calc(-50vw + 50%);
            }

            .pin-number-label {
                font-size: 10px;
            }

            .cpu-label {
                font-size: 16px;
            }
        }

        @media (max-width: 480px) {
            body {
                padding: 0;
            }

            .container {
                padding: 0;
            }

            .header {
                padding: 5px 10px;
            }

            h1 {
                font-size: 1.3em;
            }

            .cpu-container {
                padding: 2px;
                width: 100vw;
                margin-left: calc(-50vw + 50%);
                border-radius: 0;
                border-left: none;
                border-right: none;
            }

            .info-panel {
                padding: 10px;
                width: 100vw;
                margin-left: calc(-50vw + 50%);
                border-radius: 0;
                border-left: none;
                border-right: none;
                border-top: none;
            }

            .pin-details {
                padding: 8px;
                margin-bottom: 10px;
            }

            .pin-number {
                font-size: 1.1em;
            }

            .pin-name {
                font-size: 0.9em;
            }

            .pin-description {
                font-size: 0.8em;
            }

            .selected-pin-item {
                font-size: 0.8em;
                padding: 6px;
            }

            .clear-selection {
                padding: 8px 16px;
                font-size: 0.8em;
            }

            .theme-toggle {
                padding: 6px 12px;
                font-size: 12px;
            }

            .pin-number-label {
                font-size: 8px;
            }

            .cpu-label {
                font-size: 14px;
            }
        }

        @media (max-width: 320px) {
            h1 {
                font-size: 1.1em;
            }
            
            .cpu-label {
                font-size: 12px;
            }
            
            .pin-number-label {
                font-size: 6px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>CGB CPU Pinout - Game Boy Color CPU</h1>
            <button class="theme-toggle" onclick="toggleTheme()">
                🌙 Dark Mode
            </button>
        </div>
        
        <div class="main-content">
            <div class="cpu-container">
                <svg class="cpu-svg" viewBox="0 0 900 700" preserveAspectRatio="xMidYMid meet">
                    <!-- CPU Package - Smaller to accommodate bigger pins -->
                    <rect x="150" y="125" width="600" height="450" class="cpu-chip" rx="15"/>
                    
                    <!-- CPU Label -->
                    <text x="450" y="330" class="cpu-label">CGB CPU</text>
                    <text x="450" y="370" class="cpu-label" style="font-size: 14px; opacity: 0.7;">Game Boy Color CPU • QFP-128</text>
                    
                    <!-- Bottom Side Pins (1-38) -->
                    <g id="bottom-pins"></g>
                    
                    <!-- Right Side Pins (39-64) -->
                    <g id="right-pins"></g>
                    
                    <!-- Top Side Pins (65-102) -->
                    <g id="top-pins"></g>
                    
                    <!-- Left Side Pins (103-128) -->
                    <g id="left-pins"></g>
                </svg>
            </div>
            
            <div class="info-panel">
                <h3>Pin Information</h3>
                <div class="pin-info">
                    <div class="pin-description">
                        Click pins to select them and view detailed information. 
                        Multiple pins can be selected simultaneously.
                    </div>
                </div>

                <div class="selected-pins">
                    <h4>Selected Pins (<span id="selected-count">0</span>)</h4>
                    <div id="selected-list"></div>
                    <button class="clear-selection" onclick="clearSelection()">Clear All</button>
                </div>

                <div class="stats">
                    <div>Total Pins: 128</div>
                    <div>Package: QFP-128</div>
                    <div>Hover: Yellow • Selected: Red</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Pin data - keeping structure but leaving names blank as requested
        const pinData = {
            1: { 
                name: "VCC", 
                description: "Power supply voltage input",
                type: "power"
            },
            2: { 
                name: "D0", 
                description: "Data bus bit 0",
                type: "data"
            },
            3: { 
                name: "D1", 
                description: "Data bus bit 1",
                type: "data"
            },
            // ... continue for all 128 pins
            128: { 
                name: "GND", 
                description: "Ground connection",
                type: "power"
            }
        };

        // Fill in remaining pins with placeholder data
        for (let i = 4; i <= 127; i++) {
            if (!pinData[i]) {
                pinData[i] = {
                    name: `Pin ${i}`,
                    description: `Pin ${i} description`,
                    type: "general"
                };
            }
        }

        let selectedPins = new Set();
        let currentHoverPin = null;

        function createPins() {
            const bottomPins = document.getElementById('bottom-pins');
            const rightPins = document.getElementById('right-pins');
            const topPins = document.getElementById('top-pins');
            const leftPins = document.getElementById('left-pins');

            // Bottom side pins (1-38) - With 50px gaps from corners
            // CPU is 600px wide, corners at 150 and 750
            // Available space: 600 - 100 (50px each side) = 500px
            // Pin spacing: 500 / 37 = 13.51px between pins
            for (let i = 1; i <= 38; i++) {
                const x = 200 + (i - 1) * 13.51; // Start at 200 (50px from left corner)
                const pin = createPin(i, x, 585, 'bottom');
                bottomPins.appendChild(pin);
            }

            // Right side pins (39-64) - With 50px gaps from corners
            // CPU is 450px tall, corners at 125 and 575
            // Available space: 450 - 100 (50px each side) = 350px
            // Pin spacing: 350 / 25 = 14px between pins
            for (let i = 39; i <= 64; i++) {
                const y = 175 + (i - 39) * 14; // Start at 175 (50px from top corner)
                const pin = createPin(i, 760, y, 'right');
                rightPins.appendChild(pin);
            }

            // Top side pins (65-102) - With 50px gaps from corners
            // Same as bottom, but reversed order
            for (let i = 65; i <= 102; i++) {
                const x = 700 - (i - 65) * 13.51; // Start at 700 (50px from right corner)
                const pin = createPin(i, x, 115, 'top');
                topPins.appendChild(pin);
            }

            // Left side pins (103-128) - With 50px gaps from corners
            // Same as right side
            for (let i = 103; i <= 128; i++) {
                const y = 175 + (i - 103) * 14; // Start at 175 (50px from top corner)
                const pin = createPin(i, 140, y, 'left');
                leftPins.appendChild(pin);
            }
        }

        function createPin(pinNum, x, y, side) {
            const g = document.createElementNS('http://www.w3.org/2000/svg', 'g');
            
            // Pin rectangle
            const rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
            if (side === 'left' || side === 'right') {
                rect.setAttribute('x', x - 8);
                rect.setAttribute('y', y - 4);
                rect.setAttribute('width', 16);
                rect.setAttribute('height', 8);
            } else {
                rect.setAttribute('x', x - 4);
                rect.setAttribute('y', y - 8);
                rect.setAttribute('width', 8);
                rect.setAttribute('height', 16);
            }
            rect.setAttribute('class', 'pin');
            rect.setAttribute('data-pin', pinNum);
            
            // Pin number label
            const numLabel = document.createElementNS('http://www.w3.org/2000/svg', 'text');
            numLabel.setAttribute('class', 'pin-number-label');
            numLabel.textContent = pinNum;
            
            // Position labels based on side - Adjusted for smaller CPU and bigger pins
            if (side === 'left') {
                numLabel.setAttribute('x', x - 30);
                numLabel.setAttribute('y', y + 1);
            } else if (side === 'right') {
                numLabel.setAttribute('x', x + 30);
                numLabel.setAttribute('y', y + 1);
            } else if (side === 'top') {
                numLabel.setAttribute('x', x);
                numLabel.setAttribute('y', y - 25);
            } else if (side === 'bottom') {
                numLabel.setAttribute('x', x);
                numLabel.setAttribute('y', y + 30);
            }
            
            g.appendChild(rect);
            g.appendChild(numLabel);
            
            // Event listeners
            rect.addEventListener('click', (e) => {
                e.stopPropagation();
                togglePin(pinNum);
            });
            rect.addEventListener('mouseenter', () => highlightPin(pinNum));
            rect.addEventListener('mouseleave', () => unhighlightPin(pinNum));
            
            return g;
        }

        function togglePin(pinNum) {
            const pin = document.querySelector(`[data-pin="${pinNum}"]`);
            if (!pin) return;

            if (selectedPins.has(pinNum)) {
                selectedPins.delete(pinNum);
                pin.classList.remove('selected');
            } else {
                selectedPins.add(pinNum);
                pin.classList.add('selected');
            }
            
            updateInfoPanel();
            updateSelectedPinsList();
        }

        function highlightPin(pinNum) {
            if (!selectedPins.has(pinNum)) {
                const pin = document.querySelector(`[data-pin="${pinNum}"]`);
                if (pin) {
                    currentHoverPin = pinNum;
                    updateInfoPanel();
                }
            }
        }

        function unhighlightPin(pinNum) {
            if (currentHoverPin === pinNum) {
                currentHoverPin = null;
                updateInfoPanel();
            }
        }

        function updateInfoPanel() {
            const pinInfo = document.querySelector('.pin-info');
            
            if (selectedPins.size > 0) {
                const sortedPins = Array.from(selectedPins).sort((a, b) => a - b);
                const pinDetailsHtml = sortedPins.map(pinNum => {
                    const pin = pinData[pinNum];
                    return `
                        <div class="pin-details">
                            <div class="pin-number">Pin ${pinNum}</div>
                            <div class="pin-name">${pin.name || 'Name not specified'}</div>
                            <div class="pin-description">${pin.description}</div>
                        </div>
                    `;
                }).join('');
                
                pinInfo.innerHTML = pinDetailsHtml;
            } else if (currentHoverPin) {
                const pin = pinData[currentHoverPin];
                pinInfo.innerHTML = `
                    <div class="pin-details">
                        <div class="pin-number">Pin ${currentHoverPin}</div>
                        <div class="pin-name">${pin.name || 'Name not specified'}</div>
                        <div class="pin-description">${pin.description}</div>
                    </div>
                `;
            } else {
                pinInfo.innerHTML = `
                    <div class="pin-description">
                        Click pins to select them and view detailed information. 
                        Multiple pins can be selected simultaneously.
                    </div>
                `;
            }
        }

        function updateSelectedPinsList() {
            const selectedList = document.getElementById('selected-list');
            const selectedCount = document.getElementById('selected-count');
            
            selectedCount.textContent = selectedPins.size;
            
            if (selectedPins.size === 0) {
                selectedList.innerHTML = '<div style="opacity: 0.6; font-style: italic;">No pins selected</div>';
                return;
            }

            const sortedPins = Array.from(selectedPins).sort((a, b) => a - b);
            selectedList.innerHTML = sortedPins.map(pinNum => `
                <div class="selected-pin-item">
                    <span>Pin ${pinNum}</span>
                    <span style="cursor: pointer;" onclick="togglePin(${pinNum})">×</span>
                </div>
            `).join('');
        }

        function clearSelection() {
            selectedPins.forEach(pinNum => {
                const pin = document.querySelector(`[data-pin="${pinNum}"]`);
                if (pin) pin.classList.remove('selected');
            });
            selectedPins.clear();
            updateInfoPanel();
            updateSelectedPinsList();
        }

        function toggleTheme() {
            const body = document.body;
            const button = document.querySelector('.theme-toggle');
            
            if (body.hasAttribute('data-theme')) {
                body.removeAttribute('data-theme');
                button.textContent = '🌙 Dark Mode';
            } else {
                body.setAttribute('data-theme', 'dark');
                button.textContent = '☀️ Light Mode';
            }
        }

        // Initialize
        createPins();
        updateSelectedPinsList();
    </script>
</body>
</html>